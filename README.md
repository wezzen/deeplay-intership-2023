![GitHub top language](https://img.shields.io/github/languages/top/wezzen/deeplay-intership-2023)
![GitHub code size in bytes](https://img.shields.io/github/languages/code-size/wezzen/deeplay-intership-2023)
![GitHub repo size](https://img.shields.io/github/repo-size/wezzen/deeplay-intership-2023)
![GitHub](https://img.shields.io/github/license/wezzen/deeplay-intership-2023)

[![example workflow](https://github.com/wezzen/deeplay-intership-2023/actions/workflows/gradle_ubuntu.yml/badge.svg)](https://github.com/wezzen/deeplay-intership-2023/actions)
[![example workflow](https://github.com/wezzen/deeplay-intership-2023/actions/workflows/gradle_windows.yml/badge.svg)](https://github.com/wezzen/deeplay-intership-2023/actions)

[![codecov](https://codecov.io/gh/wezzen/deeplay-intership-2023/branch/master/graph/badge.svg)](https://codecov.io/gh/wezzen/deeplay-intership-2023)
![GitHub last commit](https://img.shields.io/github/last-commit/wezzen/deeplay-intership-2023)

<p align="left">
<img src="https://visitor-badge.laobi.icu/badge?page_id=wezzen.deeplay-intership-2023" alt="visitors"/>
</p>

Читать на других языках: [English](README.en.md)

# Сетевая игра Го

Данный проект представляет собой реализацию игры Го на языке программирования Java с использованием клиент-серверной
архитектуры. В игре присутствует возможность многопользовательской игры, где игроки могут соревноваться друг с другом в
партиях Го.

<a name="Содержание"></a>

## Содержание

1. [Описание](#Описание)
2. [Правила игры](#Правила-игры)
3. [Структура проекта](#Структура-проекта)
4. [Архитектура](#Архитектура)
5. [Протокол зваимодействия между сервером и клиентом](#Протокол-взаимодействия)

<a name="Описание"></a>

## Описание

Игра Го - древняя стратегическая настольная игра для двух игроков, в которой игроки чередуются размещать камни на
пересечениях линий игрового поля. Цель игры - захватывать территорию и пленять камни противника. Данный проект реализует
игру Го с возможностью игры по сети через клиент-серверную архитектуру.

<a name="Правила-игры"></a>

## Правила игры

### Игровая доска

Игровая доска в Го представляет собой квадрат размером 19x19 клеток (на традиционном доске). Также используются доски
размером 13x13 или 9x9 клеток для более коротких партий.

### Камни

Игроки используют два различных цвета фишек (черные и белые). Черные обычно ходят первыми.
Рядом стоящие камни образуют группу. Обратите внимание, что камни соединяются только по расчерченным горизонтальным и
вертикальным линиям.
По диагонали камни НЕ соединяются!

### Ходы

Два игрока ходят по очереди. Первый ход делают черные.
Во время своего хода игрок может поставить одну свою фишку на пустую клетку на доске.
При каждом ходе на доску выставляется один камень. Камень ставится на пересечение линий.
Игроки выставляют камни на доску так, чтобы отгородить как можно больше территории. Камни — это своего рода строительный
материал для возведения стен.
Однажды поставленный камень никогда не передвигается!

### Захват

У каждого камня, поставленного на доску, есть `дыхания` — это соседние пустые пункты доски, напрямую связанные с камнем
линией. У камня в центре 4 дыхания, на краю — 3, а в углу — 2. Если у камня перекрыть все пункты дыхания, то он
снимается с доски. Каждый захваченный камень приносит одно дополнительное очко!

Когда фишки одного цвета окружают группу фишек другого цвета снизу и сверху (по горизонтали или вертикали), группа фишек
врага захватывается и удаляется с доски.

Ситуация, когда до захвата камня или группы камней остается один ход, называется `атари`.

### Запрещенные действия

* Запрет на самоубийство. Нельзя ставить камень в позицию, когда он будет сразу захвачен.
* Нельзя повторять позицию предыдущего хода. Его называют правилом ко, и оно так же логично и необходимо, как и запрет
  на самоубийство.

### Конец игры

Игра заканчивается, когда оба игрока по очереди пропускают свой ход или когда оба игрока согласны на завершение игры.
После окончания игры производится подсчет очков.

### Подсчет очков

Очки подсчитываются в конце игры. Игрок получает одно очко за каждую свою фишку на доске и дополнительные очки за
захваченные фишки противника и территории, которую он захватил.

Так как черные начинают игру первыми, у них есть небольшое преимущество: они первыми захватывают углы, первыми атакуют и
т.д. И для того чтобы уравнять начальные условия игроков, ввели правило, согласно которому белым добавляется 5,5 очков
компенсации. Половинка очка не позволит закончить партию вничью. Эта компенсация называется `коми`.

[К оглавлению](#Содержание)

<a name="Структура-проекта"></a>

## Структура проекта

Основные модули проекта:

* client - модуль запуска клиента
* dao - содержит слой приложения, отвечающий за передачу данных в БД/диск
* dto - модуль с классами, отвечающими за передачу данных между слоями приложения
* decision-maker - содержит модули, отвечающие за пользовательский ввод(зависит от графической оболочки)
* exceptions - содержит модули кастомных исключений
* game - модуль с классами игровой логики
* model - модуль с основными игровми сущностями
* selfplay - модуль запуска игры локально между ботами
* server - модуль запуска сервера
* ui - содержит модули отображения польовательского интерфейса 

[К оглавлению](#Содержание)

<a name="Архитектура"></a>

## Архитектура

Проект реализован в виде клиент-серверной архитектуры:

Сервер: Обрабатывает запросы от клиентов, управляет игровыми сессиями, поддерживает правила игры и взаимодействие между
игроками.

Клиент: Взаимодействует с сервером, отображает игровое поле, позволяет игрокам или боту делать ходы и следить за ходом
игры.

[К оглавлению](#Содержание)


<a name="Протокол-взаимодействия"></a>

## Протокол взаимодействия между сервером и клиентом

### Регистрация на сервере

Запрос

```json
{
  "login": "login",
  "password-hash": "password_hash"
}
```

Ответ

```json
{
  "status": "success",
  "message": "You was successfully registrated!"
}
```

```json
{
  "status": "failure",
  "message": "This login already exists!", "Incorrect login!"
}
```

---

### Авторизация на сервере

Запрос

```json
{
  "login": "login",
  "password-hash": "password_hash"
}
```

Ответ

```json
{
  "status": "success",
  "message": "You entered!",
  "token": "UID"
}
```

```json
{
  "status": "failure",
  "message": "Invalid login or password!"
}
```

### Выйти из аккаунта

Запрос

```json
{
  "token": "UID"
}
```

Ответ

```json
{
  "status": "success",
  "message": "You've log out!"
}
```

```json
{
  "status": "failure",
  "message": "You're not authorized!", "Something bad happened!"
}
```

---

### Создать игру

Запрос

```json
{
  "with-bot": true, false,
  "color": "WHITE", "BLACK", "EMPTY",
  "size": 9, 13, 19,
  "token": "UID"
}
```

Ответ

```json
{
  "status": "success",
  "message": "Have a good game!",
  "game-id": "game_id"
}
```

```json
{
  "status": "failure",
  "message": "You're not authorized!", "Server is temporarily unavailable!"
}
```

---

### Присоединиться к игре

Запрос

```json
{
  "game-id": "game_id",
  "token": "UID",
  "color": "WHITE", "BLACK"
}
```

Ответ

```json
{
  "status": "success",
  "message": "Have a good game!"
}
```

```json
{
  "status": "failure",
  "message": "You're not authorized!", "There are two players already!", "Server is temporarily unavailable!"
}
```

---

### Во время игры

### Сделать ход

Запрос

```json
{
  "token": "UID",
  "answerType": "TURN",
  "row": "row",
  "column": "column"
}
```

Ответ

```json
{
  "status": "success",
  "message": "You can move!",
  "game-field": "game_field"
}
```

```json
{
  "status": "failure",
  "message": "Invalid move!", "Something bad happened!",
  "game-field": "game_field"
}
```

---

### Пропустить ход

Запрос

```json
{
  "token": "UID",
  "answerType": "PASS",
  "row": "row",
  "column": "column"
}
```

Ответ

```json
{
  "status": "success",
  "message": "You can pass!",
  "game-field": "game_field"
}
```

```json
{
  "status": "failure",
  "message": "Something bad happened!",
  "game-field": "game_field"
}
```
